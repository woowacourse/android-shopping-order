## 사용자 시나리오

- 상품 목록을 불러온다
- 상품을 클릭하면 상품 상세 페이지로 이동한다
    - 최근 본 상품에 추가된다
- 장바구니 담기 버튼을 누르면 카트에 추가된다
- 카트 아이콘을 누르면 장바구니 목록을 확인할 수 있다
- 장바구니 목록에서 상품을 삭제할 수 있다
- 더보기 버튼을 눌러 상품을 추가 로드할 수 있다

- 상품 목록에서 장바구니에 담을 상품의 수를 선택 가능하다
- 장바구니 화면에서도 상품의 개수를 조절 가능하지만 1미만으로는 내려가지 않는다.
- 체크박스를 활용해서 주문할 상품들을 선택가능하다
  - 장바구니의 하단에 있는 전체선택 버튼은 현재 페이지의 상품들을 대상으로만 선택 여부를 조절하는 것이다
- 상세 페이지에서 만약 그 상품이 마지막으로 본 상품이였다면, 하단에 마지막으로 본 상품 뷰가 보이지 않는다.

## Domain

### Product

- 상품 ID
- 상품 이름
- 이미지 url
- 가격

### CartProduct

- 장바구니 ID
- 상품
- 개수

### Price

- 금액은 0 이상이다

### Pagination

- 페이지네이션 기능을 담당하는 도메인 클래스
- CartProducts와 현재 페이지 번호 정보를 멤버로 갖는다. 

### CartProducts

- 장바구니에 들어가 있는 모든 상품들의 담긴 개수와 체크 여부를 리스트로 관리하고 유지한다.

### ProductRepository

- 상품 목록을 20개 단위로 불러온다

### ProductCache

- 불러온 상품 목록들을 캐싱하고 유지한다

### CartRepository

- 전체 상품 목록을 가져온다
- Product를 받아서 Cart DB에 저장한다
- Product를 Cart DB에서 삭제한다

### RecentProductRepository

- 전체 상품 목록을 가져온다
- Product를 받아서 RecentProduct DB에 저장한다

### OrderConfirm

-[x] 장바구니 페이지에서 선택한 목록을 보여준다.
``` gherkin
given 선택했던 장바구니 아이템들의 장바구니 id들을 알고 있다
when  선택했던 장바구니 아이템들의 정보만 불러오는 요청을 보낸다
then  선택했던 장바구니 정보들이 노출된다
and   주문 금액이 노출된다
and   할인 정보가 노출된다
```
-[x] 주문을 할 수 있다.
``` gherkin
given 주문하기를 누를 수 있다
when  주문 요청을 보낸다
then  주문 화면이 종료된다
```

### OrderList

-[x] 주문 목록 내역을 불러올 수 있다
``` gherkin
given 주문 목록을 불러올 수 있다
when  주문 목록을 불러온다
then  주문 목록이 화면에 보인다
```

-[x] 주문 내역을 선택하면 상세 정보 페이지로 넘어갈 수 있다
``` gherkin
given 주문 목록이 보이는 상태다
when  주문 내역을 선택한다
then  주문 상세 내역 화면이 보인다
```

### OrderDetail

-[x] 주문 상세 내역을 불러와서 화면에 보여준다
``` gherkin
given 주문 상세 정보를 불러올 수 있다
when  주문 상세 정보를 불러온다
then   주문한 상품들의 정보가 보인다
and   주문 날짜가 화면에 보인다
and   할인 전/후에 대한 정보가 화면에 보인다
```

### Main

-[x] 상품 목록을 불러오고, 각 상품 별로 장바구니 정보를 불러와서 화면에 보여준다.
``` gherkin
given 상품 정보와 장바구니 정보를 불러올 수 있다
when  정보를 불러온다
then  상품 정보를 불러온다
and   장바구니 정보를 불러온다
and   화면에 보여준다
and   장바구니 갯수의 정보를 보여준다
```

-[x] 최근 본 상품 목록을 불러와서 화면에 보여준다
``` gherkin
given 최근 본 상품 목록을 불러올 수 있다
when  최근 본 상품 목록을 불러온다
then   최근 본 상품 목록이 화면에 보인다
```

-[x] 상품을 선택했을 때 해당 상품의 id가 서버에 유효한 상품 id면 상품 상세 화면을 보여준다
``` gherkin
given 주문 상세 정보를 불러올 수 있다
when  주문 상세 정보를 불러온다
then   주문한 상품들의 정보가 보인다
and   주문 날짜가 화면에 보인다
and   할인 전/후에 대한 정보가 화면에 보인다
```


### Cart

-[x] 장바구니 목록을 처음에 불러와서 1페이지를 보여준다
``` gherkin
given 장바구니 정보를 불러올 수 있다
when  장바구니 정보를 불러온다
then  장바구니 1페이지가 보인다
```

-[x] 장바구니 화면에서 이전 페이지로 넘어간다
``` gherkin
given 현재 페이지가 1페이지보다 큰 수의 페이지다.
when  이전 페이지로 이동한다
then  이전 페이지가 보인다
```

-[x] 장바구니 화면에서 다음 페이지로 넘어간다
``` gherkin
given 현재 페이지의 다음 페이지가 존재한다
when  다음 페이지로 이동한다
then  다음 페이지가 보인다
```

- [x] 주문아이디가 일치하는 주문 상품을 삭제한다
``` gherkin
given 주문 상품을 삭제할 수 있다
when  주문 상품을 삭제한다
then  해당 상품이 현재 화면에서 사라진다
```

-[x] 주문하기 버튼을 누르면, 주문 화면으로 넘어간다
``` gherkin
given 주문하기 버튼을 
when  이전 페이지로 이동한다
then  이전 페이지가 보인다
```
